import {
    decodeSvgContent,
    decodeSymbols
} from '../utils';

describe('decodeSymbols', () => {

    it('decode', () => {
        const result = decodeSymbols(`<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">

        <symbol id="icon_language" viewBox="0 0 20 20">
        <path d="M786.24449921 558.34857177h-90.28701783c-4.5560646 73.09169769-19.74449158 139.57408906-42.38113404 193.05570603 69.05937195-40.92578888 118.88408662-110.87968826 132.66815187-193.05570603z m0-92.69714354c-13.78406525-82.17601777-63.6087799-152.12991714-132.66815186-193.05570603 22.63200759 53.48625183 37.82506943 119.96864318 42.38576889 193.05570603h90.28701783zM237.75550079 465.65142823h90.28701783c4.5560646-73.09169769 19.74449158-139.57408906 42.38113404-193.05570603C301.36428071 313.52151108 251.53956604 383.47541046 237.75550079 465.65142823z m0 92.69714354c13.78406525 82.17601777 63.6087799 152.12991714 132.66815186 193.05570603-22.63200759-53.48625183-37.82506943-119.96864318-42.38576889-193.05570603H237.75550079z m365.29626847 0h-182.10353852c4.8480606 67.78478623 20.19407272 129.03442383 42.8724289 174.38186646 11.61958694 23.25307846 24.23566819 40.29544831 35.88306427 50.14915466 4.01842118 3.39735031 7.41113663 5.50621033 10.04373549 6.58149719 1.23287201 0.5098343 1.83076858 0.63034057 2.2525406 0.63034059 0.41713715 0 1.01966858-0.12050628 2.25254059-0.62570573 2.63259888-1.07992173 6.02531433-3.18878174 10.0437355-6.58613205 11.64739609-9.85370635 24.26347733-26.8960762 35.88769913-50.14915466 22.67372131-45.34744263 38.01973342-106.59708022 42.87242889-174.38186646z m0-92.69714355c-4.8480606-67.78478623-20.19407272-129.03442383-42.8724289-174.38186645-11.61958694-23.25307846-24.23566819-40.29544831-35.88306427-50.14915466-4.01842118-3.39735031-7.41113663-5.50621033-10.0437355-6.58149719-1.23287201-0.5098343-1.83076858-0.63034057-2.25254059-0.63034059-0.41713715 0-1.01966858 0.12050628-2.2525406 0.62570573-2.63259888 1.07992173-6.02531433 3.18878174-10.04373549 6.58613205-11.64739609 9.85370635-24.26347733 26.8960762-35.88769913 50.14915466-22.67372131 45.34744263-38.01973342 106.59708022-42.8724289 174.38186645h182.10817338zM512 882.78857422c-204.78189468 0-370.78857422-166.00667954-370.78857422-370.78857422S307.21810532 141.21142578 512 141.21142578s370.78857422 166.00667954 370.78857422 370.78857422-166.00667954 370.78857422-370.78857422 370.78857422z"/>
            </symbol>

            </svg>`);

        expect(result[0].content).toEqual('<path d="M786.24449921 558.34857177h-90.28701783c-4.5560646 73.09169769-19.74449158 139.57408906-42.38113404 193.05570603 69.05937195-40.92578888 118.88408662-110.87968826 132.66815187-193.05570603z m0-92.69714354c-13.78406525-82.17601777-63.6087799-152.12991714-132.66815186-193.05570603 22.63200759 53.48625183 37.82506943 119.96864318 42.38576889 193.05570603h90.28701783zM237.75550079 465.65142823h90.28701783c4.5560646-73.09169769 19.74449158-139.57408906 42.38113404-193.05570603C301.36428071 313.52151108 251.53956604 383.47541046 237.75550079 465.65142823z m0 92.69714354c13.78406525 82.17601777 63.6087799 152.12991714 132.66815186 193.05570603-22.63200759-53.48625183-37.82506943-119.96864318-42.38576889-193.05570603H237.75550079z m365.29626847 0h-182.10353852c4.8480606 67.78478623 20.19407272 129.03442383 42.8724289 174.38186646 11.61958694 23.25307846 24.23566819 40.29544831 35.88306427 50.14915466 4.01842118 3.39735031 7.41113663 5.50621033 10.04373549 6.58149719 1.23287201 0.5098343 1.83076858 0.63034057 2.2525406 0.63034059 0.41713715 0 1.01966858-0.12050628 2.25254059-0.62570573 2.63259888-1.07992173 6.02531433-3.18878174 10.0437355-6.58613205 11.64739609-9.85370635 24.26347733-26.8960762 35.88769913-50.14915466 22.67372131-45.34744263 38.01973342-106.59708022 42.87242889-174.38186646z m0-92.69714355c-4.8480606-67.78478623-20.19407272-129.03442383-42.8724289-174.38186645-11.61958694-23.25307846-24.23566819-40.29544831-35.88306427-50.14915466-4.01842118-3.39735031-7.41113663-5.50621033-10.0437355-6.58149719-1.23287201-0.5098343-1.83076858-0.63034057-2.25254059-0.63034059-0.41713715 0-1.01966858 0.12050628-2.2525406 0.62570573-2.63259888 1.07992173-6.02531433 3.18878174-10.04373549 6.58613205-11.64739609 9.85370635-24.26347733 26.8960762-35.88769913 50.14915466-22.67372131 45.34744263-38.01973342 106.59708022-42.8724289 174.38186645h182.10817338zM512 882.78857422c-204.78189468 0-370.78857422-166.00667954-370.78857422-370.78857422S307.21810532 141.21142578 512 141.21142578s370.78857422 166.00667954 370.78857422 370.78857422-166.00667954 370.78857422-370.78857422 370.78857422z"/>');
        expect(result[0].viewBox).toEqual('0 0 20 20');
        expect(result[0].code).toEqual('language');
    });

});

describe('decodeSvgContent', () => {

    it('decode', () => {
        const result = decodeSvgContent(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" style="display: none;">
<rect y="0.5" width="60" height="60" rx="30" fill="#179C5F"/>
<ellipse id="Ellipse 13" cx="30" cy="30.5" rx="24" ry="23.5" fill="#7ACB9A"/>
<path id="Vector" d="M19.0321 31.9548L26.0096 38.3624C27.0274 39.2993 28.6028 39.2495 29.56 38.2625L42.0081 26.3443C43.0206 25.3707 43.0513 23.7599 42.0773 22.7468C41.1034 21.7353 39.4934 21.7036 38.4809 22.6772L27.6984 33.0009L22.4791 28.2081C21.4451 27.2567 19.8341 27.3235 18.8822 28.3585C17.9304 29.3925 17.9975 31.0025 19.0321 31.9548Z" fill="white"/>
            </svg>`);

        expect(result.content.rect).toEqual([
            {
                'fill': '#179C5F',
                'height': '60',
                'rx': '30',
                'width': '60',
                'y': '0.5'
            }
        ]);
        expect(result.content.ellipse).toEqual([
            {
                'cx': '30',
                'cy': '30.5',
                'fill': '#7ACB9A',
                'rx': '24',
                'ry': '23.5'
            }
        ]);
        expect(result.content.path).toEqual([
            {
                'd': 'M19.0321 31.9548L26.0096 38.3624C27.0274 39.2993 28.6028 39.2495 29.56 38.2625L42.0081 26.3443C43.0206 25.3707 43.0513 23.7599 42.0773 22.7468C41.1034 21.7353 39.4934 21.7036 38.4809 22.6772L27.6984 33.0009L22.4791 28.2081C21.4451 27.2567 19.8341 27.3235 18.8822 28.3585C17.9304 29.3925 17.9975 31.0025 19.0321 31.9548Z',
                'fill': 'white'
            }
        ]);
    });

});


describe('decodeSvgContent', () => {

    it('decode', () => {
        const result = decodeSvgContent(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" style="display: none;">
<rect y="0.5" width="60" height="60" rx="30" fill="#179C5F"/>
<ellipse id="Ellipse 13" cx="30" cy="30.5" rx="24" ry="23.5" fill="#7ACB9A"/>
<path id="Vector" d="M19.0321 31.9548L26.0096 38.3624C27.0274 39.2993 28.6028 39.2495 29.56 38.2625L42.0081 26.3443C43.0206 25.3707 43.0513 23.7599 42.0773 22.7468C41.1034 21.7353 39.4934 21.7036 38.4809 22.6772L27.6984 33.0009L22.4791 28.2081C21.4451 27.2567 19.8341 27.3235 18.8822 28.3585C17.9304 29.3925 17.9975 31.0025 19.0321 31.9548Z" fill="white"/>
            </svg>`);

        expect(result.content.rect).toEqual([
            {
                'fill': '#179C5F',
                'height': '60',
                'rx': '30',
                'width': '60',
                'y': '0.5'
            }
        ]);
        expect(result.content.ellipse).toEqual([
            {
                'cx': '30',
                'cy': '30.5',
                'fill': '#7ACB9A',
                'rx': '24',
                'ry': '23.5'
            }
        ]);
        expect(result.content.path).toEqual([
            {
                'd': 'M19.0321 31.9548L26.0096 38.3624C27.0274 39.2993 28.6028 39.2495 29.56 38.2625L42.0081 26.3443C43.0206 25.3707 43.0513 23.7599 42.0773 22.7468C41.1034 21.7353 39.4934 21.7036 38.4809 22.6772L27.6984 33.0009L22.4791 28.2081C21.4451 27.2567 19.8341 27.3235 18.8822 28.3585C17.9304 29.3925 17.9975 31.0025 19.0321 31.9548Z',
                'fill': 'white'
            }
        ]);
    });


    it('decode split defs', () => {
        const result = decodeSvgContent(`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 10" style="display: none;">
<path fill="url(#paint0_linear_2_48673)" fill-rule="evenodd" clip-rule="evenodd" d="M13.837 9.16788C12.4387 8.36286 11.4541 7.03822 10.4706 5.63684C11.249 4.84528 11.3772 4.06181 10.8609 3.42102C10.6529 3.16451 10.3654 3.01347 10.0613 3.00086C9.75724 2.98825 9.46117 3.11509 9.23772 3.35371C8.65975 3.97834 8.76112 4.73624 9.57681 5.67857C9.41175 5.88717 9.25293 6.10542 9.094 6.32381C8.73909 6.81154 8.38367 7.29995 7.95709 7.68304C7.15451 8.41484 6.28183 9.03772 5.3562 9.53943C4.51954 9.98232 3.64442 9.7952 2.92079 9.02653C3.00411 8.90055 3.0819 8.76981 3.15384 8.63479C3.23653 8.47518 3.28923 8.29725 3.30851 8.11257C3.32779 7.9279 3.31321 7.7406 3.26574 7.56285C3.21826 7.3851 3.13894 7.22089 3.03294 7.08087C2.92693 6.94085 2.79661 6.82816 2.65045 6.75013C2.50388 6.67509 2.34549 6.63578 2.18518 6.63468C2.02487 6.63358 1.86608 6.67071 1.71876 6.74374C1.57143 6.81678 1.43874 6.92414 1.32897 7.05912C1.2192 7.19411 1.13473 7.35381 1.08083 7.52823C0.87341 8.28075 1.22299 9.08038 1.92215 9.22307C2.30669 9.3025 2.37544 9.53943 2.43953 9.88405C2.53281 10.3799 2.62877 10.8764 2.72482 11.3734C2.91195 12.3416 3.09941 13.3115 3.26804 14.282C3.3531 14.7694 3.49061 14.978 3.97419 14.978C7.11825 14.9571 10.2595 14.9589 13.4006 14.9608C14.2981 14.9613 15.1955 14.9619 16.093 14.9619C16.2083 14.9619 16.3232 14.9527 16.4446 14.943C16.5034 14.9383 16.5639 14.9335 16.6267 14.9295C16.7029 14.5375 16.7791 14.1474 16.855 13.7587C17.103 12.4888 17.3479 11.2344 17.5799 9.97694C17.6591 9.55289 17.7477 9.28635 18.201 9.19211C18.8477 9.05749 19.1705 8.22286 18.9549 7.49727C18.8462 7.16832 18.6303 6.90165 18.3535 6.75444C18.0766 6.60723 17.7608 6.59118 17.4739 6.70975C17.3286 6.77435 17.1961 6.87209 17.0843 6.99715C16.9725 7.1222 16.8837 7.27201 16.8231 7.43761C16.7625 7.60322 16.7314 7.78123 16.7317 7.96102C16.732 8.1408 16.7637 8.31868 16.8248 8.48402C16.9122 8.67748 17.0099 8.86451 17.1173 9.04403C16.0347 10.0833 14.9324 9.80193 13.837 9.16788ZM3.4375 15.7346L3.65657 17L16.3802 16.9987C16.4571 16.5679 16.5293 16.1613 16.6051 15.7346H3.4375Z" />
<defs>
<linearGradient id="paint0_linear_2_48673" x1="10.2375" y1="17" x2="-0.331014" y2="15.6298" gradientUnits="userSpaceOnUse">
<stop stop-color="#12B9CC"/>
<stop offset="1" stop-color="#96D5DC"/>
</linearGradient>
</defs>
</svg>`);


        // expect(result.content.stop).toEqual([
        //     {
        //         'stopColor': '#12B9CC'
        //     },
        //     {
        //         'offset': '1',
        //         'stopColor': '#96D5DC'
        //     }
        // ]);

        expect(result.defs).toEqual([
            {
                'attr': {
                    'id': result.defs[0].attr.id,
                    'x1': '10.2375',
                    'x2': '-0.331014',
                    'y1': '17',
                    'y2': '15.6298'
                },
                'stop': [
                    {
                        'stopColor': '#12B9CC'
                    },
                    {
                        'offset': '1',
                        'stopColor': '#96D5DC'
                    }
                ]
            }
        ]);
        expect(result.content.path).toEqual([
            {
                'clipRule': 'evenodd',
                'd': 'M13.837 9.16788C12.4387 8.36286 11.4541 7.03822 10.4706 5.63684C11.249 4.84528 11.3772 4.06181 10.8609 3.42102C10.6529 3.16451 10.3654 3.01347 10.0613 3.00086C9.75724 2.98825 9.46117 3.11509 9.23772 3.35371C8.65975 3.97834 8.76112 4.73624 9.57681 5.67857C9.41175 5.88717 9.25293 6.10542 9.094 6.32381C8.73909 6.81154 8.38367 7.29995 7.95709 7.68304C7.15451 8.41484 6.28183 9.03772 5.3562 9.53943C4.51954 9.98232 3.64442 9.7952 2.92079 9.02653C3.00411 8.90055 3.0819 8.76981 3.15384 8.63479C3.23653 8.47518 3.28923 8.29725 3.30851 8.11257C3.32779 7.9279 3.31321 7.7406 3.26574 7.56285C3.21826 7.3851 3.13894 7.22089 3.03294 7.08087C2.92693 6.94085 2.79661 6.82816 2.65045 6.75013C2.50388 6.67509 2.34549 6.63578 2.18518 6.63468C2.02487 6.63358 1.86608 6.67071 1.71876 6.74374C1.57143 6.81678 1.43874 6.92414 1.32897 7.05912C1.2192 7.19411 1.13473 7.35381 1.08083 7.52823C0.87341 8.28075 1.22299 9.08038 1.92215 9.22307C2.30669 9.3025 2.37544 9.53943 2.43953 9.88405C2.53281 10.3799 2.62877 10.8764 2.72482 11.3734C2.91195 12.3416 3.09941 13.3115 3.26804 14.282C3.3531 14.7694 3.49061 14.978 3.97419 14.978C7.11825 14.9571 10.2595 14.9589 13.4006 14.9608C14.2981 14.9613 15.1955 14.9619 16.093 14.9619C16.2083 14.9619 16.3232 14.9527 16.4446 14.943C16.5034 14.9383 16.5639 14.9335 16.6267 14.9295C16.7029 14.5375 16.7791 14.1474 16.855 13.7587C17.103 12.4888 17.3479 11.2344 17.5799 9.97694C17.6591 9.55289 17.7477 9.28635 18.201 9.19211C18.8477 9.05749 19.1705 8.22286 18.9549 7.49727C18.8462 7.16832 18.6303 6.90165 18.3535 6.75444C18.0766 6.60723 17.7608 6.59118 17.4739 6.70975C17.3286 6.77435 17.1961 6.87209 17.0843 6.99715C16.9725 7.1222 16.8837 7.27201 16.8231 7.43761C16.7625 7.60322 16.7314 7.78123 16.7317 7.96102C16.732 8.1408 16.7637 8.31868 16.8248 8.48402C16.9122 8.67748 17.0099 8.86451 17.1173 9.04403C16.0347 10.0833 14.9324 9.80193 13.837 9.16788ZM3.4375 15.7346L3.65657 17L16.3802 16.9987C16.4571 16.5679 16.5293 16.1613 16.6051 15.7346H3.4375Z',
                'fill': `url(#${result.defs[0].attr.id})`,
                'fillRule': 'evenodd'
            }
        ]);
    });

});
